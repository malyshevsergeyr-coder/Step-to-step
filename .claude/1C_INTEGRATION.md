# Интеграция с 1С:УПП

## Общая информация

**Версия платформы:** 1С:Предприятие 8.3 (8.3.27.1859)
**Конфигурация:** Управление производственным предприятием (УПП), редакция 1.3 (1.3.22.1)
**Особенность:** Конфигурация доработана под стекольное производство

**Доступы:**
- Конфигуратор: ✅ Есть доступ
- Режим предприятия: ✅ Есть доступ (основная и тестовая база)
- SQL Server: ⏳ Уточнить у Андрея (IT)

---

## Структура конфигурации

### Ключевые справочники

| Справочник | Назначение | Приоритет |
|------------|------------|-----------|
| `Номенклатура` | Все товары, материалы, продукция | ⭐⭐⭐ |
| `Контрагенты` | Заказчики, поставщики | ⭐⭐⭐ |
| `СтеклаДляСтеклопакетов` | Виды стёкол (М1, закалённое, триплекс...) | ⭐⭐⭐ |
| `РамкиСтеклопакеты` | Дистанционные рамки | ⭐⭐ |
| `Формулы` | Формулы стеклопакетов | ⭐⭐⭐ |
| `ТехнологическиеКартыПроизводства` | Маршруты изготовления | ⭐⭐⭐ |
| `ТехнологическиеОперации` | Операции (раскрой, закалка, сборка...) | ⭐⭐⭐ |
| `РабочиеЦентры` | Производственные участки/посты | ⭐⭐ |
| `МастераСтекольногоПроизводства` | Мастера цехов | ⭐⭐ |
| `Склады` | Склады материалов и готовой продукции | ⭐⭐ |
| `Подразделения` | Структура предприятия | ⭐ |
| `СпецификацииРамокСтеклопакетов` | Спецификации рамок | ⭐⭐ |
| `ВесМетраСтеклопакета` | Вес стеклопакетов | ⭐ |

### Ключевые документы

| Документ | Назначение | Приоритет для интеграции |
|----------|------------|--------------------------|
| `ЗаказПокупателя` | Входящий заказ от клиента | ⭐⭐⭐ |
| `ЗаказНаСтеклопакеты` | Заказ на производство СП | ⭐⭐⭐ |
| `ЗаданиеНаРаскройСтеклопакетов` | **ДИСКЕТА!** Задание в цех раскроя | ⭐⭐⭐ |
| `ЗаданиеНаРаскройСтеклопакетовНестандарт` | Нестандартные задания | ⭐⭐ |
| `ЗаданиеНаПроизводство` | Общее задание на производство | ⭐⭐ |
| `ЗаказНаПроизводство` | Производственный заказ | ⭐⭐ |
| `ВыпускПродукции` | Отметка о готовности продукции | ⭐⭐⭐ |
| `РеализацияТоваровУслуг` | Отгрузка клиенту | ⭐⭐ |
| `ЗакрытиеЗаказовНаПроизводство` | Закрытие производственных заказов | ⭐ |
| `ЗакрытиеЗаказовПокупателей` | Закрытие заказов клиентов | ⭐ |

### Регистры (для получения остатков и движений)

| Регистр | Тип | Назначение |
|---------|-----|------------|
| Регистры накопления | Остатки | Остатки на складах, состояние заказов |
| Регистры сведений | Сведения | Цены, характеристики, настройки |

### Дополнительные подсистемы

- **CRM** — управление клиентами (CRM_Клиенты, CRM_Заявки, CRM_Замеры...)
- **ОкноСофт** — интеграция с программой расчёта окон
- **Битрикс** — интеграция с сайтом (ЗаказПокупателяБитрикс)

---

## Варианты интеграции

### 1. SQL Server (рекомендуется)
**Преимущества:** Быстрый доступ, можно читать в реальном времени
**Требуется:**
- [ ] Имя SQL сервера
- [ ] Имя базы данных
- [ ] Логин/пароль или Windows-аутентификация

### 2. COM-объект 1С
**Преимущества:** Полный доступ к данным через API 1С
**Недостатки:** Требует установленной 1С на сервере, медленнее SQL

### 3. HTTP-сервисы 1С
**Преимущества:** REST API, современный подход
**Недостатки:** Нужно настраивать/разрабатывать на стороне 1С

### 4. Выгрузка в файлы
**Преимущества:** Простота
**Недостатки:** Не в реальном времени, ручная работа

---

## План интеграции

### Этап 1: Разведка (текущий)
- [x] Получить доступ к конфигуратору
- [x] Изучить структуру справочников и документов
- [x] Сохранить конфигурацию (.cf)
- [ ] Узнать параметры SQL сервера
- [ ] Посмотреть реальный документ "ЗаданиеНаРаскройСтеклопакетов"

### Этап 2: Подключение к данным
- [ ] Подключиться к SQL Server
- [ ] Найти таблицы документов и справочников
- [ ] Написать тестовые запросы

### Этап 3: Чтение заказов
- [ ] Получить список активных заказов
- [ ] Получить задания на раскрой (дискеты)
- [ ] Связать с веб-приложением

### Этап 4: Запись в 1С
- [ ] Отметка выпуска продукции
- [ ] Закрытие заказов

---

## Скриншоты конфигурации

Сохранены в: `C:\Users\office\Documents\Google Web\Дерево конфигураций\`
- 1.PNG - 25.PNG — полное дерево конфигурации
- Справочники, документы, регистры

## Файл конфигурации

Сохранён в: `C:\Users\office\Desktop\1Cv8.cf`
- Содержит структуру метаданных
- Можно анализировать для понимания связей

---

## Заметки

### Специфика стекольного производства в 1С
- Конфигурация сильно доработана под стеклопакеты
- Есть специальные справочники: стёкла, рамки, формулы
- Документ "ЗаданиеНаРаскройСтеклопакетов" = дискета в терминах производства
- Интеграция с ОкноСофт (программа расчёта конструкций)

### Связь с нашим прототипом
| Наш прототип | 1С УПП |
|--------------|--------|
| Дискета | ЗаданиеНаРаскройСтеклопакетов |
| Изделие | Строка табличной части задания |
| Этапы | ТехнологическиеОперации |
| Маршрут | ТехнологическиеКартыПроизводства |
| Выпуск | ВыпускПродукции |

---

**Последнее обновление:** 2026-02-05
**Версия:** 1.0
